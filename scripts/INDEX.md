# AgentX Proxy æµ‹è¯•è„šæœ¬ç´¢å¼•

æœ¬æ–‡æ¡£æ˜¯æ‰€æœ‰æµ‹è¯•å’Œæ¼”ç¤ºè„šæœ¬çš„å¿«é€Ÿå‚è€ƒç´¢å¼•ã€‚

## ğŸ“š è„šæœ¬æ¸…å•

| è„šæœ¬åç§° | ç±»å‹ | æè¿° | æ¨èä½¿ç”¨åœºæ™¯ |
|---------|------|------|-------------|
| `quick_demo.sh` | æ¼”ç¤º | å¿«é€Ÿæ¼”ç¤ºåŸºæœ¬åŠŸèƒ½ | é¦–æ¬¡ä½“éªŒ / 5åˆ†é’Ÿäº†è§£ |
| `setup_demo.sh` | æ¼”ç¤º | äº¤äº’å¼æ¼”ç¤ºè®¾ç½® | äº§å“æ¼”ç¤º / åŠŸèƒ½å±•ç¤º |
| `test_scenarios.sh` | æµ‹è¯• | å®Œæ•´åŠŸèƒ½æµ‹è¯• | åŠŸèƒ½éªŒè¯ / QAæµ‹è¯• |
| `benchmark.sh` | æ€§èƒ½ | æ€§èƒ½åŸºå‡†æµ‹è¯• | æ€§èƒ½è¯„ä¼° / å‹åŠ›æµ‹è¯• |
| `config.env` | é…ç½® | ç¯å¢ƒé…ç½®å’Œå·¥å…·å‡½æ•° | è„šæœ¬å¼€å‘ / é«˜çº§ç”¨æˆ· |
| `README.md` | æ–‡æ¡£ | è¯¦ç»†æ–‡æ¡£å’Œä½¿ç”¨è¯´æ˜ | å­¦ä¹ å‚è€ƒ |
| `Makefile` | å·¥å…· | ä¾¿æ·å‘½ä»¤å°è£… | å¿«é€Ÿæ‰§è¡Œ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³• 1: ä½¿ç”¨ Makeï¼ˆæ¨èï¼‰

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make help

# æ£€æŸ¥ç¯å¢ƒ
make check

# æ„å»ºé¡¹ç›®
make build

# å¿«é€Ÿæ¼”ç¤º
make quick

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make all
```

### æ–¹æ³• 2: ç›´æ¥æ‰§è¡Œè„šæœ¬

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x scripts/*.sh

# å¿«é€Ÿæ¼”ç¤º
./scripts/quick_demo.sh

# äº¤äº’å¼æ¼”ç¤º
./scripts/setup_demo.sh

# åŠŸèƒ½æµ‹è¯•
./scripts/test_scenarios.sh

# æ€§èƒ½æµ‹è¯•
./scripts/benchmark.sh
```

### æ–¹æ³• 3: ä½¿ç”¨é…ç½®ç¯å¢ƒ

```bash
# åŠ è½½é…ç½®
source scripts/config.env

# ä½¿ç”¨é…ç½®ä¸­çš„å·¥å…·å‡½æ•°
agentx_show_config
agentx_validate_env
agentx_gen_client_id

# å¯åŠ¨æµ‹è¯•æœåŠ¡
agentx_start_test_service 3000 "My Service"

# æ¸…ç†ç¯å¢ƒ
agentx_cleanup
```

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨

### å¼€å‘æµ‹è¯•

| ä»»åŠ¡ | å‘½ä»¤ |
|------|------|
| æ£€æŸ¥ç¯å¢ƒ | `make check` |
| æ„å»ºé¡¹ç›® | `make build` |
| å¿«é€Ÿæ¼”ç¤º | `make quick` |
| è¿è¡Œæ‰€æœ‰æµ‹è¯• | `make all` |
| æ¸…ç† | `make clean` |

### ç‰¹å®šåŠŸèƒ½æµ‹è¯•

| åœºæ™¯ | å‘½ä»¤ |
|------|------|
| TCP ä»£ç†æ¨¡å¼ | `make test-1` |
| å‘½ä»¤æ¨¡å¼ | `make test-2` |
| å¤šå®¢æˆ·ç«¯ | `make test-3` |
| æ•°æ®åº“è®¿é—® | `make test-4` |
| å‹åŠ›æµ‹è¯• | `make test-5` |

### æ€§èƒ½æµ‹è¯•

| ç±»å‹ | å‘½ä»¤ |
|------|------|
| åŸºæœ¬æ€§èƒ½ | `make benchmark` |
| ç¨³å®šæ€§æµ‹è¯• | `make benchmark-stability` |
| è‡ªå®šä¹‰æ€§èƒ½ | `make benchmark POOL_SIZE=10 DURATION=60` |

### æ¼”ç¤ºåœºæ™¯

| åœºæ™¯ | å‘½ä»¤ |
|------|------|
| Web å¼€å‘ | `./scripts/setup_demo.sh -s 1` |
| API æœåŠ¡ | `./scripts/setup_demo.sh -s 2` |
| æ•°æ®åº“ | `./scripts/setup_demo.sh -s 3` |
| Claude | `./scripts/setup_demo.sh -s 4` |
| å®Œæ•´æ¼”ç¤º | `./scripts/setup_demo.sh -s 5` |

## ğŸ¯ ä½¿ç”¨åœºæ™¯å†³ç­–æ ‘

```
æˆ‘éœ€è¦...
â”‚
â”œâ”€ å¿«é€Ÿä½“éªŒç³»ç»Ÿ (5åˆ†é’Ÿ)
â”‚  â””â”€ make quick
â”‚
â”œâ”€ äº†è§£æ‰€æœ‰åŠŸèƒ½
â”‚  â””â”€ make demo (äº¤äº’å¼é€‰æ‹©)
â”‚
â”œâ”€ éªŒè¯ç‰¹å®šåŠŸèƒ½
â”‚  â”œâ”€ TCP ä»£ç† -> make test-1
â”‚  â”œâ”€ å‘½ä»¤æ¨¡å¼ -> make test-2
â”‚  â”œâ”€ å¤šå®¢æˆ·ç«¯ -> make test-3
â”‚  â”œâ”€ æ•°æ®åº“ -> make test-4
â”‚  â””â”€ å…¨éƒ¨ -> make test
â”‚
â”œâ”€ æ€§èƒ½è¯„ä¼°
â”‚  â”œâ”€ åŸºæœ¬æ€§èƒ½ -> make benchmark
â”‚  â”œâ”€ ç¨³å®šæ€§ -> make benchmark-stability
â”‚  â””â”€ è‡ªå®šä¹‰ -> POOL_SIZE=10 make benchmark
â”‚
â”œâ”€ äº§å“æ¼”ç¤º
â”‚  â””â”€ ./scripts/setup_demo.sh
â”‚
â””â”€ å¼€å‘è°ƒè¯•
   â”œâ”€ æŸ¥çœ‹é…ç½® -> source scripts/config.env; agentx_show_config
   â”œâ”€ æ£€æŸ¥ç¯å¢ƒ -> make check
   â”œâ”€ æŸ¥çœ‹æ—¥å¿— -> tail -f /tmp/arps.log
   â””â”€ æ¸…ç†ç¯å¢ƒ -> make clean
```

## ğŸ“Š è„šæœ¬ç‰¹æ€§å¯¹æ¯”

| ç‰¹æ€§ | quick_demo | setup_demo | test_scenarios | benchmark |
|------|-----------|-----------|---------------|-----------|
| è‡ªåŠ¨åŒ–ç¨‹åº¦ | å…¨è‡ªåŠ¨ | åŠè‡ªåŠ¨ | åŠè‡ªåŠ¨ | åŠè‡ªåŠ¨ |
| äº¤äº’æ€§ | æ—  | æœ‰ | æœ‰ | å‚æ•°é…ç½® |
| æµ‹è¯•è¦†ç›– | åŸºç¡€ | ä¸­ç­‰ | å…¨é¢ | æ€§èƒ½ä¸“é¡¹ |
| æ‰§è¡Œæ—¶é—´ | 30ç§’ | 1-5åˆ†é’Ÿ | 5-15åˆ†é’Ÿ | 1-10åˆ†é’Ÿ |
| éš¾åº¦ç­‰çº§ | â­ | â­â­ | â­â­â­ | â­â­â­â­ |
| æ¨èç”¨æˆ· | æ–°æ‰‹ | æ‰€æœ‰ç”¨æˆ· | å¼€å‘è€… | æ€§èƒ½å·¥ç¨‹å¸ˆ |

## ğŸ”§ é…ç½®é€‰é¡¹

### ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰æµ‹è¯•è¡Œä¸ºï¼š

```bash
# åŸºæœ¬é…ç½®
export POOL_SIZE=10
export TEST_DURATION=60
export CONCURRENT_USERS=20
export SERVER_HOST="your-server.com"

# æ—¥å¿—é…ç½®
export RUST_LOG=debug
export LOG_DIR="/my/logs"

# è¿è¡Œæµ‹è¯•
make benchmark
```

### å‘½ä»¤è¡Œå‚æ•°

```bash
# benchmark.sh å‚æ•°
./scripts/benchmark.sh -p 10 -d 60 -c 20

# setup_demo.sh å‚æ•°
./scripts/setup_demo.sh -s 1 --pool-size 5 --server-host "0.0.0.0"

# test_scenarios.sh å‚æ•°
# (é€šè¿‡äº¤äº’å¼é€‰æ‹©)
```

## ğŸ“ æ—¥å¿—æ–‡ä»¶ä½ç½®

æ‰€æœ‰è„šæœ¬è¿è¡Œæ—¥å¿—ä¿å­˜åœ¨ `/tmp/` ç›®å½•ï¼š

```
/tmp/
â”œâ”€â”€ arps_*.log              # æœåŠ¡å™¨æ—¥å¿—
â”œâ”€â”€ arpc_*.log              # å®¢æˆ·ç«¯æ—¥å¿—
â”œâ”€â”€ test_server_*.log         # æµ‹è¯•æœåŠ¡æ—¥å¿—
â”œâ”€â”€ demo_*.log                # æ¼”ç¤ºæ—¥å¿—
â”œâ”€â”€ benchmark_*.json          # æ€§èƒ½æµ‹è¯•ç»“æœ
â””â”€â”€ *.pid                     # è¿›ç¨‹ ID æ–‡ä»¶
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ
A: è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†ï¼Œæˆ–è€…æ‰‹åŠ¨æ¸…ç†ï¼š
```bash
lsof -ti:17001 | xargs kill -9
make clean
```

### Q: æµ‹è¯•å¤±è´¥å¦‚ä½•è°ƒè¯•ï¼Ÿ
A: å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š
```bash
RUST_LOG=debug make quick
tail -f /tmp/arpc_*.log
```

### Q: æ€§èƒ½æµ‹è¯•ç»“æœåœ¨å“ªé‡Œï¼Ÿ
A: JSON æ ¼å¼ä¿å­˜åœ¨ï¼š
```bash
cat /tmp/agentx_benchmark_*.json
```

### Q: å¦‚ä½•è‡ªå®šä¹‰æµ‹è¯•æœåŠ¡ï¼Ÿ
A: ä½¿ç”¨ config.env ä¸­çš„å‡½æ•°ï¼š
```bash
source scripts/config.env
agentx_start_test_service 9000 "MyCustomService"
```

## ğŸ“ è·å–å¸®åŠ©

### æŸ¥çœ‹å®Œæ•´æ–‡æ¡£
```bash
cat scripts/README.md
```

### æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
```bash
make help
./scripts/quick_demo.sh --help
./scripts/benchmark.sh --help
./scripts/setup_demo.sh --help
```

### æ£€æŸ¥ç¯å¢ƒ
```bash
make check
source scripts/config.env && agentx_validate_env
```

## ğŸ“ å­¦ä¹ è·¯å¾„

1. **æ–°æ‰‹å…¥é—¨**
   ```bash
   make check      # æ£€æŸ¥ç¯å¢ƒ
   make build      # æ„å»ºé¡¹ç›®
   make quick      # å¿«é€Ÿæ¼”ç¤º
   ```

2. **åŠŸèƒ½å­¦ä¹ **
   ```bash
   make demo       # äº¤äº’å¼æ¼”ç¤º
   cat scripts/README.md  # é˜…è¯»æ–‡æ¡£
   ```

3. **å¼€å‘æµ‹è¯•**
   ```bash
   make test       # åŠŸèƒ½æµ‹è¯•
   make benchmark  # æ€§èƒ½æµ‹è¯•
   ```

4. **é«˜çº§ä½¿ç”¨**
   ```bash
   source scripts/config.env  # åŠ è½½å·¥å…·å‡½æ•°
   # è‡ªå®šä¹‰æµ‹è¯•è„šæœ¬
   ```

## ğŸ¤ è´¡çŒ®æŒ‡å—

åˆ›å»ºæ–°è„šæœ¬æ—¶ï¼Œè¯·ï¼š

1. éµå¾ªå‘½åè§„èŒƒï¼š`*.sh` æˆ– `*.py`
2. æ·»åŠ  shebang: `#!/bin/bash`
3. åŒ…å«è¯¦ç»†æ³¨é‡Š
4. ä½¿ç”¨é¢œè‰²è¾“å‡º
5. å®ç°é”™è¯¯å¤„ç†
6. æ·»åŠ å¸®åŠ©ä¿¡æ¯
7. æ›´æ–°æ­¤ç´¢å¼•æ–‡æ¡£

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0 (å½“å‰ç‰ˆæœ¬)
- âœ… æ·»åŠ å¿«é€Ÿæ¼”ç¤ºè„šæœ¬
- âœ… æ·»åŠ äº¤äº’å¼æ¼”ç¤ºè®¾ç½®
- âœ… æ·»åŠ å®Œæ•´åŠŸèƒ½æµ‹è¯•
- âœ… æ·»åŠ æ€§èƒ½åŸºå‡†æµ‹è¯•
- âœ… æ·»åŠ é…ç½®ç¯å¢ƒæ–‡ä»¶
- âœ… æ·»åŠ  Makefile ä¾¿æ·å‘½ä»¤
- âœ… æ·»åŠ è¯¦ç»†æ–‡æ¡£

---

**æç¤º**: æ‰€æœ‰è„šæœ¬éƒ½æ”¯æŒ Ctrl+C ä¼˜é›…é€€å‡ºï¼Œä¼šè‡ªåŠ¨æ¸…ç†åå°è¿›ç¨‹ã€‚
